<header class="entry-header" style="box-sizing: inherit; display: block; padding: 0px 82.5313px; color: rgb(51, 51, 51); font-family: " noto="" serif",="" serif;="" font-size:="" 19px;="" font-style:="" normal;="" font-variant-ligatures:="" font-variant-caps:="" font-weight:="" 400;="" letter-spacing:="" orphans:="" 2;="" text-align:="" start;="" text-indent:="" 0px;="" text-transform:="" none;="" white-space:="" widows:="" word-spacing:="" -webkit-text-stroke-width:="" text-decoration-style:="" initial;="" text-decoration-color:="" initial;"=""><h1 class="entry-title" style="box-sizing: inherit; border: 0px; font-family: inherit; font-size: 3.9rem; font-style: inherit; font-weight: 700; margin: 0px 0px 1.2308em; outline: 0px; padding: 0px; vertical-align: baseline; clear: both; line-height: 1.2308;">DNS setup with bind on CentOS 7</h1></header><div class="entry-content" style="box-sizing: inherit; border: 0px; font-family: " noto="" serif",="" serif;="" font-size:="" 19px;="" font-style:="" normal;="" font-weight:="" 400;="" margin:="" 0px;="" outline:="" padding:="" 0px="" 82.5313px="" 82.5313px;="" vertical-align:="" baseline;="" overflow-wrap:="" break-word;="" color:="" rgb(51,="" 51,="" 51);="" font-variant-ligatures:="" font-variant-caps:="" letter-spacing:="" orphans:="" 2;="" text-align:="" start;="" text-indent:="" text-transform:="" none;="" white-space:="" widows:="" word-spacing:="" -webkit-text-stroke-width:="" text-decoration-style:="" initial;="" text-decoration-color:="" initial;"=""><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">Maybe you need a private DNS server on an internal network or maybe you just want to learn more about DNS. Setting up a pair of DNS servers is not too complicated and can be useful in certain situations.</p><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">This guide will outline how to setup 2 DNS servers, one being the primary and the other being the secondary DNS server on CentOS 7. This guide will make use of the following servers:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">dns01.example.com (192.168.1.101) - Primary DNS server
dns02.example.com (192.168.1.102) - Secondary DNS server</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">Before beginning, make sure you have the latest updates on both servers by running:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns01 ~]# yum update
[root@dns01 ~]# reboot</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;"><strong style="box-sizing: inherit; border: 0px; font-family: inherit; font-size: 16px; font-style: inherit; font-weight: 700; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">Primary DNS server setup</strong></p><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">First, install bind by running:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns01 ~]# yum install bind bind-utils</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">There are a couple key settings that need to be customized to fit your needs:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">- trusted-recursion : Which IP's or subnets you want to allow inbound to perform lookups.
- forwarders : Specify a pair of DNS servers to act of forwarders.  
- zonefile : Setup your zonefiles</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">The instructions below will create a new named.conf with the following setup:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">- trusted-recursion from 192.168.1.0/24
- forwarders : Will use google's DNS servers, 8.8.8.8 and 8.8.4.4
- zonefile : We will be setting up example.com and allow zone transfers to dns02.example.com (192.168.1.102).  We'll also be setting reverse DNS.</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">Adjust the settings to meet your environments needs accordingly. The primary fields to change will be in bold below:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns01 ~]# mv /etc/named.conf /etc/named.conf.orig 
[root@dns01 ~]# vim /etc/named.conf
//
// named.conf
//
// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS
// server as a caching only nameserver (as a localhost DNS resolver only).
//
// See /usr/share/doc/bind*/sample/ for example named configuration files.
//
// See the BIND Administrator's Reference Manual (ARM) for details about the
// configuration located in /usr/share/doc/bind-{version}/Bv9ARM.html

acl "trusted-recursion" {
        localhost;
        localnets;
        <strong style="box-sizing: inherit; border: 0px; font-family: inherit; font-size: 15.2px; font-style: inherit; font-weight: 700; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">192.168.1.0/24;</strong>
};


options {
        listen-on port 53 { any; };
        listen-on-v6 port 53 { ::1; };
        directory       "/var/named";
        dump-file       "/var/named/data/cache_dump.db";
        statistics-file "/var/named/data/named_stats.txt";
        memstatistics-file "/var/named/data/named_mem_stats.txt";
        allow-query     { any; };
        allow-recursion { trusted-recursion; };
        allow-query-cache { trusted-recursion; };
        /*
         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.
         - If you are building a RECURSIVE (caching) DNS server, you need to enable
           recursion.
         - If your recursive DNS server has a public IP address, you MUST enable access
           control to limit queries to your legitimate users. Failing to do so will
           cause your server to become part of large scale DNS amplification
           attacks. Implementing BCP38 within your network would greatly
           reduce such attack surface
        */
        /* recursion yes; */

        dnssec-enable yes;
        dnssec-validation no;

        /* Path to ISC DLV key */
        bindkeys-file "/etc/named.iscdlv.key";

        managed-keys-directory "/var/named/dynamic";

        pid-file "/run/named/named.pid";
        session-keyfile "/run/named/session.key";

        # Setup Google's dns as forwarders
        forwarders {
                <strong style="box-sizing: inherit; border: 0px; font-family: inherit; font-size: 15.2px; font-style: inherit; font-weight: 700; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">8.8.8.8;
                8.8.4.4;</strong>
        };
};

logging {
        channel default_debug {
                file "data/named.run";
                severity dynamic;
        };
};

zone "." IN {
        type hint;
        file "named.ca";
};

include "/etc/named.rfc1912.zones";
include "/etc/named.root.key";

<strong style="box-sizing: inherit; border: 0px; font-family: inherit; font-size: 15.2px; font-style: inherit; font-weight: 700; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">zone "example.com" {
    type master;
    file "dynamic/example.com"; # zone file path
    allow-transfer { 192.168.1.102; };
    notify yes;
};

zone "1.168.192.in-addr.arpa" in {
        type master;
        file "dynamic/1.168.192.in-addr.arpa.zone";
        allow-transfer { 192.168.1.102; };
        notify yes;</strong>
};</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">Create the actual zonefile for example.com:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns01 ~]# vim /var/named/dynamic/db.example.com
; Remember to update the serial by 1 each time you edit this file!
$TTL 300                ; 5 minutes 
@       IN      SOA     dns01.example.com. admin.example.com. (
                  1     ; Serial
               3600     ; Refresh
                300     ; Retry
            1814400     ; Expire
                300 )   ; Negative Cache TTL

; name servers - NS records
    IN      NS      dns01.example.com.
    IN      NS      dns02.example.com.

; name servers - A records
dns01.example.com.     IN     A     192.168.1.101
dns02.example.com.     IN     A     192.168.1.102

; All other A records
example.com.           IN     A     192.168.1.200
www.example.com.       IN     A     192.168.1.200
web01.example.com.     IN     A     192.168.1.201
web02.example.com.     IN     A     192.168.1.202
web03.example.com.     IN     A     192.168.1.203</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">Then setup reverse DNS for your IP space:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns01 ~]# vim /var/named/dynamic/1.168.192.in-addr.arpa.zone
vim /var/named/dynamic/1.168.192.in-addr.arpa.zone
$ORIGIN 1.168.192.in-addr.arpa.
$TTL 86400              ; 1 day
@       IN      SOA     dns01.example.com. admin.example.com. (
                  1     ; Serial
               7200     ; refresh (2 hous)
               7200     ; retry (2 hours)
            2419200     ; expire (5 weeks 6 days 16 hours)
              86400 )   ; minimum (1 day)

1.168.192.in-addr.arpa. IN NS dns01.example.com.
1.168.192.in-addr.arpa. IN NS dns02.example.com.

101     IN     PTR     dns01.example.com.
102     IN     PTR     dns02.example.com.

200     IN     PTR     www.example.com.
201     IN     PTR     web01.example.com.
202     IN     PTR     web02.example.com.
203     IN     PTR     web03.example.com.</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">Now confirm your syntax is valid:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns01 ~]# named-checkconf</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">If no errors are returned, set bind to start on boot and fire it up:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns01 ~]# systemctl enable named
[root@dns01 ~]# systemctl restart named</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">Finally, update the servers /etc/resolv.conf:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns01 ~]# mv /etc/resolv.conf /etc/resolv.conf.orig
[root@dns01 ~]# cat &lt;&lt; EOF &gt; /etc/resolv.conf
domain example.com
search example.com
nameserver 192.168.1.101
nameserver 192.168.1.102
EOF</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;"><strong style="box-sizing: inherit; border: 0px; font-family: inherit; font-size: 16px; font-style: inherit; font-weight: 700; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">Secondary DNS server setup</strong></p><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">Setting up dns02.example.com will be easier since it will automatically retrieve the zonefiles from dns01. Adjust the settings to meet your environments needs accordingly. The primary fields to change will be in bold below:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns02 ~]# mv /etc/named.conf /etc/named.conf.orig 
[root@dns02 ~]# vim /etc/named.conf
//
// named.conf
//
// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS
// server as a caching only nameserver (as a localhost DNS resolver only).
//
// See /usr/share/doc/bind*/sample/ for example named configuration files.
//
// See the BIND Administrator's Reference Manual (ARM) for details about the
// configuration located in /usr/share/doc/bind-{version}/Bv9ARM.html

acl "trusted-recursion" {
        localhost;
        localnets;
        <strong style="box-sizing: inherit; border: 0px; font-family: inherit; font-size: 15.2px; font-style: inherit; font-weight: 700; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">192.168.1.0/24;</strong>
};


options {
        listen-on port 53 { any; };
        listen-on-v6 port 53 { ::1; };
        directory       "/var/named";
        dump-file       "/var/named/data/cache_dump.db";
        statistics-file "/var/named/data/named_stats.txt";
        memstatistics-file "/var/named/data/named_mem_stats.txt";
        allow-query     { any; };
        allow-recursion { trusted-recursion; };
        allow-query-cache { trusted-recursion; };
        /*
         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.
         - If you are building a RECURSIVE (caching) DNS server, you need to enable
           recursion.
         - If your recursive DNS server has a public IP address, you MUST enable access
           control to limit queries to your legitimate users. Failing to do so will
           cause your server to become part of large scale DNS amplification
           attacks. Implementing BCP38 within your network would greatly
           reduce such attack surface
        */
        /* recursion yes; */

        dnssec-enable yes;
        dnssec-validation no;

        /* Path to ISC DLV key */
        bindkeys-file "/etc/named.iscdlv.key";

        managed-keys-directory "/var/named/dynamic";

        pid-file "/run/named/named.pid";
        session-keyfile "/run/named/session.key";

        # Setup Google's dns as forwarders
        forwarders {
                <strong style="box-sizing: inherit; border: 0px; font-family: inherit; font-size: 15.2px; font-style: inherit; font-weight: 700; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">8.8.8.8;
                8.8.4.4;</strong>
        };
};

logging {
        channel default_debug {
                file "data/named.run";
                severity dynamic;
        };
};

zone "." IN {
        type hint;
        file "named.ca";
};

include "/etc/named.rfc1912.zones";
include "/etc/named.root.key";

<strong style="box-sizing: inherit; border: 0px; font-family: inherit; font-size: 15.2px; font-style: inherit; font-weight: 700; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">zone "example.com" {
        type slave;
        file "slaves/db.example.com";
        masters { 192.168.1.101; };
};

zone "1.168.192.in-addr.arpa" in {
        type slave;
        file "slaves/1.168.192.in-addr.arpa.zone";
        masters { 192.168.1.101; };</strong></pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">Now confirm your syntax is valid:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns02 ~]# named-checkconf</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">If no errors are returned, set bind to start on boot and fire it up:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns02 ~]# systemctl enable named
[root@dns02 ~]# systemctl restart named</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">Verify the zonefiles replicated over to dns02.example.com by checking in:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns02 ~]# ls -al /var/named/slaves/</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">Finally, update the servers /etc/resolv.conf:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px 0px 1.6842em; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@dns01 ~]# cp /etc/resolv.conf /etc/resolv.conf.orig
[root@dns01 ~]# cat &lt;&lt; EOF &gt; /etc/resolv.conf
domain example.com
search example.com
nameserver 192.168.1.102
nameserver 192.168.1.101
EOF</pre><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;"><strong style="box-sizing: inherit; border: 0px; font-family: inherit; font-size: 16px; font-style: inherit; font-weight: 700; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">Testing the DNS servers</strong></p><p style="box-sizing: inherit; border: 0px; font-family: Arial; font-size: 16px; font-style: normal; font-weight: 400; margin: 0px 0px 1.6842em; outline: 0px; padding: 0px; vertical-align: baseline; line-height: 1.6;">You can verify the DNS servers are working by:</p><pre style="box-sizing: inherit; border: 1px solid rgba(51, 51, 51, 0.1); font-family: Inconsolata, monospace; font-size: 15.2px; font-style: inherit; font-weight: inherit; margin: 0px; outline: 0px; padding: 0.8em; vertical-align: baseline; hyphens: none; background-color: rgba(0, 0, 0, 0.01); line-height: 1.2632; max-width: 100%; overflow: auto; white-space: pre-wrap; overflow-wrap: break-word;">[root@web01 ~]# dig @192.168.1.101 www.example.com +short
192.168.1.200
[root@web01 ~]# dig @192.168.1.101 -x 192.168.1.200 +short
www.example.com.

[root@web01 ~]# dig @192.168.1.102 www.example.com +short
192.168.1.200
[root@web01 ~]# dig @192.168.1.102 -x 192.168.1.200 +short
www.example.com.</pre></div>